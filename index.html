<!DOCTYPE html>
<html class="dark" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Code Typer - Editor & Preview</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="styles.css?v=20260219f" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#137fec",
            "background-light": "#f6f7f8",
            "background-dark": "#101922",
            "surface-dark": "#1a242f",
            "border-dark": "#283039",
          },
          fontFamily: {
            display: ["Space Grotesk", "sans-serif"],
            mono: ["JetBrains Mono", "monospace"],
          },
          borderRadius: { DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px" },
        },
      },
    };
  </script>
  <style>
    /* Custom scrollbar for webkit */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #101922;
    }
    ::-webkit-scrollbar-thumb {
      background: #283039;
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #3e4a56;
    }

    /* Smooth animation for cursor */
    @keyframes blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0; }
    }
    .cursor-blink {
      animation: blink 1s infinite;
    }

    /* Canvas rendering support */
    .code-frame {
      position: relative;
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .code-frame canvas {
      display: block;
      max-width: 100%;
      height: auto;
      margin: 0 auto;
    }

    #typed-target {
      position: relative;
      display: block;
      min-height: min-content;
    }

    #typed-target canvas {
      display: block;
      max-width: 100%;
      height: auto;
    }

    /* Syntax Highlighting Overlay */
    .code-editor-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    :root {
      --editor-font-size: 0.75rem;
      --editor-line-height: 1.5rem;
      --editor-pad-top: 1rem;
      --editor-pad-right: 1rem;
      --editor-pad-bottom: 1rem;
      --editor-pad-left: 3.5rem;
      --editor-tab-size: 2;
    }

    #code-input-highlight {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: block;
      padding: var(--editor-pad-top) var(--editor-pad-right) var(--editor-pad-bottom) var(--editor-pad-left);
      margin: 0;
      pointer-events: none;
      overflow: hidden;
      white-space: pre;
      overflow-wrap: normal;
      word-wrap: normal;
      line-height: var(--editor-line-height);
      font-size: var(--editor-font-size);
      font-family: 'JetBrains Mono', monospace;
      tab-size: var(--editor-tab-size);
      color: transparent;
      background: transparent;
    }

    #code-input-highlight code {
      display: block;
      margin: 0 !important;
      padding: 0 !important;
      font-family: inherit;
      font-size: inherit;
      line-height: inherit;
      white-space: inherit !important;
      tab-size: var(--editor-tab-size);
    }

    #code-input {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100%;
      height: 100%;
      min-height: 100%;
      z-index: 1;
      background: transparent !important;
      color: transparent !important;
      caret-color: #38bdf8;
      -webkit-text-fill-color: transparent;
      font-family: 'JetBrains Mono', monospace;
      font-size: var(--editor-font-size);
      line-height: var(--editor-line-height);
      padding: var(--editor-pad-top) var(--editor-pad-right) var(--editor-pad-bottom) var(--editor-pad-left) !important;
      white-space: pre;
      tab-size: var(--editor-tab-size);
      letter-spacing: normal;
      border: 0;
      overflow: auto;
    }

    #code-input::selection {
      background: rgba(56, 189, 248, 0.3);
      color: transparent;
      -webkit-text-fill-color: transparent;
    }

    #line-numbers {
      overflow-y: auto;
      overflow-x: hidden;
      font-size: var(--editor-font-size);
      line-height: var(--editor-line-height);
      height: 100%;
      text-align: right;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    #line-numbers::-webkit-scrollbar {
      display: none;
    }

    #line-numbers div {
      line-height: var(--editor-line-height);
      height: var(--editor-line-height);
      text-align: right;
      white-space: nowrap;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 font-display min-h-screen flex flex-col overflow-hidden">
  <!-- Top Navigation -->
  <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-border-dark px-6 py-3 bg-background-dark shrink-0">
    <div class="flex items-center gap-4 text-white">
      <div class="size-8 flex items-center justify-center rounded bg-primary/20 text-primary">
        <span class="material-symbols-outlined">terminal</span>
      </div>
      <h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">Code Typer</h2>
    </div>
    <div class="flex gap-3">
      <button id="settings-btn" class="flex items-center justify-center overflow-hidden rounded-lg h-9 bg-surface-dark hover:bg-border-dark transition-colors text-slate-300 gap-2 text-sm font-bold px-3 border border-border-dark">
        <span class="material-symbols-outlined text-[18px]">settings</span>
      </button>
      <button id="export-webm" class="flex items-center justify-center overflow-hidden rounded-lg h-9 px-4 bg-primary hover:bg-blue-600 transition-colors text-white text-sm font-bold shadow-lg shadow-blue-900/20">
        <span class="material-symbols-outlined text-[18px] mr-2">movie</span>
        <span class="truncate">Export WebM</span>
      </button>
    </div>
  </header>

  <!-- Main Workspace -->
  <div class="flex flex-1 overflow-hidden">
    <!-- Left Pane: Code Editor -->
    <div id="editor-pane" class="flex flex-col min-w-[300px] border-r border-border-dark bg-[#0d1117] relative group" style="width: 32%;">
      <div class="flex items-center justify-between px-4 py-2 border-b border-border-dark bg-surface-dark/50">
        <div class="flex items-center gap-2">
          <span class="material-symbols-outlined text-slate-500 text-[16px]">code</span>
          <span class="text-xs font-semibold text-slate-400 uppercase tracking-wider">Source Code</span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-xs text-slate-500">Auto-saved</span>
        </div>
      </div>
      <div class="flex-1 overflow-hidden p-0 font-mono text-sm relative">
        <!-- Line Numbers Column -->
        <div class="absolute left-0 top-0 bottom-0 w-12 bg-[#0d1117] border-r border-border-dark/50 py-4 pr-3 text-slate-600 select-none pointer-events-none z-20 text-xs" style="line-height: 1.5rem;">
          <div id="line-numbers"></div>
        </div>
        <!-- Code Editor with Syntax Highlighting -->
        <div class="code-editor-wrapper">
          <pre id="code-input-highlight" class="hljs" aria-hidden="true"><code class="language-javascript"></code></pre>
          <textarea id="code-input" class="bg-transparent text-slate-300 p-4 pl-14 focus:outline-none resize-none selection:bg-primary/30 font-mono whitespace-pre" style="font-size: 0.75rem; line-height: 1.5rem;" spellcheck="false">// Welcome to Code Typer!
// Start typing your code here...

function init() {
  console.log("Initializing system...");
  
  Tpyr.wait(1000); // Pause for effect
  
  const user = {
    name: "Developer",
    level: 9000
  };

  return user;
}

init();</textarea>
        </div>
      </div>
    </div>

    <!-- Resize Handle: Editor/Playback -->
    <div id="resize-handle-editor" class="w-1 bg-border-dark hover:bg-primary cursor-col-resize transition-colors relative group" title="Drag to resize">
      <div class="absolute inset-y-0 -left-1 -right-1"></div>
    </div>

    <!-- Right Pane: Live Stage & Preview -->
    <div id="playback-pane" class="flex flex-col bg-background-dark min-w-[400px] relative" style="flex: 1;">
      <!-- Toolbar -->
      <div class="h-14 border-b border-border-dark flex items-center justify-between px-6 bg-surface-dark z-20">
        <div class="flex items-center gap-4">
          <div class="flex items-center gap-1">
            <button id="skip-prev" class="p-1 rounded text-slate-400 hover:text-white" title="Previous">
              <span class="material-symbols-outlined text-[16px]">skip_previous</span>
            </button>
            <button id="play-button" class="p-1 rounded text-primary hover:text-blue-400" title="Play">
              <span class="material-symbols-outlined text-[16px]">play_arrow</span>
            </button>
            <button id="pause-btn" class="p-1 rounded text-slate-400 hover:text-white" title="Pause">
              <span class="material-symbols-outlined text-[16px]">pause</span>
            </button>
          </div>
          <div class="h-6 w-px bg-border-dark"></div>
          <div class="flex items-center gap-2">
            <span class="text-xs font-medium text-slate-400">Speed</span>
            <input id="speed" class="w-24 h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary" max="200" min="1" type="range" value="50" />
            <span id="speed-value" class="text-xs font-mono text-slate-300 w-8">1x</span>
          </div>
        </div>
        <div class="flex items-center gap-3">
          <span id="time-display" class="text-xs text-slate-500">00:00 / 00:00</span>
        </div>
      </div>

      <!-- Playback Container - Main Canvas Area -->
      <div id="playback-context" class="flex-1 relative overflow-hidden">
        <div id="playback-stage" class="absolute inset-0 flex items-start justify-center p-8 bg-background-dark">
        <!-- The "Terminal" Window -->
          <div id="playback-container" class="relative w-full max-w-4xl mx-auto flex flex-col bg-[#1e1e1e] rounded-lg shadow-2xl border border-slate-700/50 overflow-hidden" style="max-height: 100%;">
            <!-- Window Title Bar -->
            <div class="flex items-center justify-between px-4 py-2 bg-[#2d2d2d] border-b border-black/20 shrink-0">
              <div class="flex gap-2">
                <div class="w-3 h-3 rounded-full bg-[#ff5f56]"></div>
                <div class="w-3 h-3 rounded-full bg-[#ffbd2e]"></div>
                <div class="w-3 h-3 rounded-full bg-[#27c93f]"></div>
              </div>
              <div id="playback-title" class="text-xs text-slate-400 font-medium font-sans" contenteditable="true" spellcheck="false" dir="ltr">code.js â€” bash</div>
              <div class="w-10"></div>
            </div>
            <!-- Content - Code Frame for canvas rendering -->
            <div class="code-frame flex-1" id="code-frame">
              <div id="typed-target" class="font-mono text-sm leading-relaxed text-[#d4d4d4] whitespace-pre-wrap break-words hljs">
                <!-- Canvas will be rendered here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Resize Handle: Playback/Settings -->
    <div id="resize-handle-settings" class="w-1 bg-border-dark hover:bg-primary cursor-col-resize transition-colors relative group" title="Drag to resize">
      <div class="absolute inset-y-0 -left-1 -right-1"></div>
    </div>

    <!-- Far Right: Settings Sidebar -->
    <div id="settings-pane" class="bg-surface-dark border-l border-border-dark flex flex-col shrink-0 overflow-y-auto" style="width: 280px;">
      <div class="p-4 border-b border-border-dark">
        <h3 class="text-sm font-bold text-white uppercase tracking-wider">Configuration</h3>
      </div>
      <div class="p-4 space-y-6">
        <!-- Appearance -->
        <div class="space-y-4">
          <label class="text-xs font-semibold text-slate-400 block">Appearance</label>
          <div class="space-y-1">
            <span class="text-xs text-slate-500">Color Theme</span>
            <select id="theme-select" class="w-full bg-background-dark border border-border-dark rounded px-3 py-1.5 text-sm text-white focus:border-primary focus:ring-0">
              <option value="panda">Panda</option>
              <option value="midnight">Midnight</option>
              <option value="sunset">Sunset</option>
              <option value="forest">Forest</option>
              <option value="ocean">Ocean</option>
              <option value="crimson">Crimson</option>
              <option value="mono">Mono</option>
            </select>
          </div>
          <div class="space-y-1">
            <span class="text-xs text-slate-500">Font Family</span>
            <select id="font-select" class="w-full bg-background-dark border border-border-dark rounded px-3 py-1.5 text-sm text-white focus:border-primary focus:ring-0">
              <option value="hack">Hack</option>
              <option value="firacode">Fira Code</option>
              <option value="sourcecodepro">Source Code Pro</option>
              <option value="consolas">Consolas</option>
            </select>
          </div>
          <div class="flex items-center justify-between pt-2">
            <span class="text-sm text-slate-300">Line Numbers</span>
            <button id="toggle-line-numbers" class="w-10 h-5 rounded-full bg-primary relative transition-colors focus:outline-none">
              <span class="absolute right-1 top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-transform"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Hidden helper elements -->
  <div class="hidden">
    <!-- Buttons -->
    <button id="clear"></button>
    <button id="compile-gif"></button>
    <button id="playback-minimize"></button>
    <button id="playback-maximize"></button>

    <!-- Input elements -->
    <input id="speed-input" type="number" />
    <input id="fast-export-toggle" type="checkbox" />
    <input id="stage-width-input" type="number" />
    <input id="stage-height-input" type="number" />
    <input id="height-reset" type="range" />
    <input id="height-reset-input" type="number" />

    <!-- Display elements (hidden but referenced) -->
    <span id="speed-value"></span>
    <span id="stage-width-value"></span>
    <span id="stage-height-value"></span>
    <span id="height-reset-value"></span>

    <!-- Language selector -->
    <input id="language-input" list="language-options" />
    <datalist id="language-options">
      <option value="auto">Auto (detect)</option>
      <option value="javascript">JavaScript</option>
      <option value="typescript">TypeScript</option>
      <option value="html">HTML</option>
      <option value="css">CSS</option>
      <option value="json">JSON</option>
      <option value="python">Python</option>
      <option value="java">Java</option>
      <option value="csharp">C#</option>
      <option value="cpp">C++</option>
      <option value="go">Go</option>
      <option value="php">PHP</option>
      <option value="ruby">Ruby</option>
      <option value="bash">Bash</option>
      <option value="markdown">Markdown</option>
      <option value="yaml">YAML</option>
      <option value="sql">SQL</option>
      <option value="plaintext">Plain text</option>
    </datalist>

    <!-- Typing/display buffers -->
    <div id="typed-buffer"></div>
    <div id="typed-target" class="hljs"></div>
    
    <!-- Status/export elements -->
    <div id="export-status"></div>
    <div id="compile-list"></div>
  </div>

  <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/xml.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js"></script>
  <script src="main.js?v=20260219k"></script>
</body>
</html>
